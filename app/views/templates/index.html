{% extends "base.html" %}

{% block title %}Inicio - Videos con Drones{% endblock %}

{% block before_header %}
<div class="page-background">
    <video autoplay muted loop playsinline class="hero-video" preload="auto">
        <source src="{{ url_for('static', filename='videos/video_background.mp4') }}" type="video/mp4">
        Tu navegador no soporta videos HTML5.
    </video>
    <div class="hero-overlay"></div>
</div>
{% endblock %}

{% block content %}
<section class="hero">
    <div class="hero-content">

        <h1 class="hero-title">
            <span class="hero-text-static">Capturamos momentos</span>
            <span class="hero-text-dynamic">
                <span class="dynamic-word active">épicos</span>
                <span class="dynamic-word">impresionantes</span>
                <span class="dynamic-word">únicos</span>
                <span class="dynamic-word">Profesionales</span>
            </span>
        </h1>

        <p class="hero-description">
            Ofrecemos videografía aérea profesional para eventos, bodas, inmobiliarias y proyectos comerciales.
            Transformamos perspectivas ordinarias en experiencias visuales extraordinarias desde el cielo.
        </p>

        <div class="hero-buttons">
            <a href="{{ url_for('main.contact') }}" class="btn btn-outline">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                </svg>
                Hablemos
            </a>
            <a href="#testimonios" class="btn btn-outline">
                Testimonios
            </a>
            <a href="#videos" class="btn btn-primary">
                Ver nuestros trabajos
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
            </a>
        </div>
    </div>
</section>

<section class="video-gallery" id="videos">
    <div class="gallery-header">
        <div class="category-buttons">
            {% for category in categories %}
            <button class="category-btn {% if loop.index0 == 0 %}active{% endif %}" data-category="{{ loop.index0 }}" aria-label="Videos de {{ category }}">
                <svg class="btn-border" viewBox="0 0 200 80" preserveAspectRatio="none">
                    <rect class="border-path" width="100%" height="100%" rx="28" ry="28" fill="none" stroke-width="2"/>
                </svg>
                <span class="btn-gradient"></span>
                <span class="btn-content">{{ category }}</span>
            </button>
            {% endfor %}
        </div>
    </div>

    <div class="carousel-container">
        <div class="carousel-track" id="carouselTrack">
            {% for video in videos %}
            <div class="carousel-item">
                <div class="video-card">
                    <div class="video-wrapper" data-video-index="{{ loop.index0 }}" data-category="{{ video.category }}">
                        <video preload="metadata" poster="">
                            <source src="{{ url_for('static', filename='videos/' + video.filename) }}" type="video/mp4">
                            Tu navegador no soporta el elemento de video.
                        </video>
                        <div class="play-button">
                            <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                                <circle cx="40" cy="40" r="40" fill="rgba(255,255,255,0.9)"/>
                                <path d="M32 26L56 40L32 54V26Z" fill="#1a1a1a"/>
                            </svg>
                        </div>
                        <div class="video-overlay">
                            <div class="video-info">
                                <h3>{{ video.title }}</h3>
                                {% if video.description %}
                                <p>{{ video.description }}</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

</section>

<section class="testimonials-section" id="testimonios">
    <div class="testimonials-header">
        <h2>Lo que dicen nuestros clientes</h2>
        <p>Descubre cómo ayudamos a nuestros clientes a capturar sus momentos más importantes desde el cielo.</p>
    </div>

    <div class="testimonials-container">
        {% set column_count = 3 %}
        {% set items_per_column = (testimonials|length / column_count)|round|int %}

        {% for col_idx in range(column_count) %}
        <div class="testimonials-column {% if col_idx == 1 %}hidden-mobile{% elif col_idx == 2 %}hidden-tablet{% endif %}" id="column{{ col_idx + 1 }}">
            {% set start_idx = col_idx * items_per_column %}
            {% set end_idx = start_idx + items_per_column %}

            {% for testimonial in testimonials[start_idx:end_idx] %}
            <div class="testimonial-card">
                <p>"{{ testimonial.content }}"</p>
                <div class="testimonial-author">
                    {% if testimonial.author_image_url %}
                    <img src="{{ testimonial.author_image_url }}" alt="{{ testimonial.author_name }}">
                    {% endif %}
                    <div>
                        <div class="author-name">{{ testimonial.author_name }}</div>
                        <div class="author-role">{{ testimonial.author_role }}</div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
</section>
{% endblock %}
